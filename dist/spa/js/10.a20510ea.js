(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"8e25":function(s,a,e){"use strict";e.r(a);var t=function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("q-page",{staticClass:"flex column flex-center dark-page user-profile"},[e("h1",[s._v("Editar Perfil")]),s.loading?e("q-circular-progress",{staticClass:"q-ma-md",attrs:{indeterminate:"",size:"150px",color:"secondary"}}):e("q-form",{staticClass:"form flex column items-center",on:{submit:s.editUserSubmit}},[e("q-input",{staticClass:"input",attrs:{dark:"",filled:"",label:"Nome"},model:{value:s.profileForm.name,callback:function(a){s.$set(s.profileForm,"name",a)},expression:"profileForm.name"}}),e("q-input",{staticClass:"input",attrs:{dark:"",filled:"",label:"Login"},model:{value:s.profileForm.login,callback:function(a){s.$set(s.profileForm,"login",a)},expression:"profileForm.login"}}),e("q-input",{staticClass:"input",attrs:{dark:"",filled:"",label:"Email"},model:{value:s.profileForm.email,callback:function(a){s.$set(s.profileForm,"email",a)},expression:"profileForm.email"}}),e("div",{staticClass:"flex justify-between user-change-password"},[e("q-btn",{staticClass:"btn-pass",attrs:{"text-color":"white",icon:"fas fa-key",label:"Trocar Senha"},on:{click:s.toggleChangePasswordMenu}})],1),e("q-btn",{staticClass:"btn",attrs:{"text-color":"white",label:"Salvar",type:"submit"}})],1),e("q-dialog",{attrs:{persistent:""},model:{value:s.changePasswordVisible,callback:function(a){s.changePasswordVisible=a},expression:"changePasswordVisible"}},[e("q-card",{staticClass:"password-api-dialog-card flex column items-center"},[e("q-card-section",{staticClass:"row items-center text-dialog"},[s._v("\n        Alteração de senha\n      ")]),e("q-card-section",{staticClass:"password-inputs"},[e("q-input",{staticClass:"input",attrs:{type:"password",dark:"",filled:"",label:"Senha Antiga"},model:{value:s.oldPassword,callback:function(a){s.oldPassword=a},expression:"oldPassword"}}),e("q-input",{staticClass:"input",attrs:{type:"password",dark:"",filled:"",label:"Nova Senha"},model:{value:s.profileForm.password,callback:function(a){s.$set(s.profileForm,"password",a)},expression:"profileForm.password"}}),e("q-input",{staticClass:"input",attrs:{type:"password",dark:"",filled:"",label:"Repetir Senha"},model:{value:s.verifyPassword,callback:function(a){s.verifyPassword=a},expression:"verifyPassword"}})],1),e("q-card-actions",{staticClass:"btn-actions",attrs:{align:"center"}},[e("q-btn",{staticClass:"btn",attrs:{"text-color":"white",label:"Cancelar"},on:{click:s.toggleChangePasswordMenu}}),e("q-btn",{staticClass:"btn",attrs:{"text-color":"white",label:"Confirmar"},on:{click:s.confirmChangePassword}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:s.verifyPasswordVisible,callback:function(a){s.verifyPasswordVisible=a},expression:"verifyPasswordVisible"}},[e("q-card",{staticClass:"password-api-dialog-card flex column items-center"},[e("q-card-section",{staticClass:"row justify-center items-center text-dialog"},[s._v("\n        Verificar Senha\n      ")]),e("q-card-section",{staticClass:"password-inputs"},[e("q-input",{staticClass:"input",attrs:{type:"password",dark:"",filled:"",label:"Senha"},model:{value:s.profileForm.password,callback:function(a){s.$set(s.profileForm,"password",a)},expression:"profileForm.password"}})],1),e("q-card-actions",{staticClass:"flex justify-center btn-actions",attrs:{align:"center"}},[e("q-btn",{staticClass:"btn",attrs:{"text-color":"white",label:"Cancelar"},on:{click:s.toggleVerifyPasswordMenu}}),e("q-btn",{staticClass:"btn",attrs:{"text-color":"white",label:"Confirmar"},on:{click:s.validatePassword}})],1)],1)],1)],1)},i=[],r=(e("e6cf"),e("7b5e")),o=e("c841"),l={name:"EditProfile",data(){return{profileForm:{id:"",name:"",login:"",email:"",password:"",oldPassword:null},verifyPassword:"",oldPassword:"",changePasswordVisible:!1,verifyPasswordVisible:!1,passwordChanged:!1,loading:!1}},computed:{userId(){return this.$route.params.id}},methods:{async loadUser(){const s=new o["a"],a=await s.find(this.userId);a&&(this.profileForm=a)},async editUserSubmit(){if(this.loading=!0,!this.passwordChanged&&!this.profileForm.password)return void this.toggleVerifyPasswordMenu();this.oldPassword&&""!==this.oldPassword&&(this.profileForm.oldPassword=this.oldPassword);const s=new o["a"],a=await s.update(this.profileForm);a&&this.$store.commit("user/saveUserInfo",a),a&&await this.redirectPage(),this.clearPassword(),this.loading=!1},async redirectPage(){await this.$router.push("/")},async validatePassword(){this.passwordChanged=!0,this.toggleVerifyPasswordMenu(),await this.editUserSubmit()},toggleVerifyPasswordMenu(){this.loading=!1,this.verifyPasswordVisible=!this.verifyPasswordVisible},toggleChangePasswordMenu(){this.loading=!1,this.changePasswordVisible=!this.changePasswordVisible},clearPassword(){this.passwordChanged=!1,this.profileForm.password=null,this.oldPassword="",this.verifyPassword=""},confirmChangePassword(){const s=this.verifyPassword===this.profileForm.password,a=""!==this.oldPassword&&""!==this.profileForm.password&&s;if(a)return Object(r["a"])("warning","Salve o usuário para validar a alteração"),void this.toggleChangePasswordMenu();Object(r["a"])("negative","Valores de senha inválidos")}},watch:{verifyPassword(){this.passwordChanged=!0},async userId(){await this.loadUser()}},async mounted(){await this.loadUser()}},n=l,d=e("2877"),c=e("9989"),p=e("0378"),w=e("27f9"),f=e("9c40"),u=e("58ea"),h=e("24e8"),m=e("f09f"),g=e("a370"),b=e("4b7e"),P=e("eebe"),C=e.n(P),v=Object(d["a"])(n,t,i,!1,null,"501484d7",null);a["default"]=v.exports;C()(v,"components",{QPage:c["a"],QForm:p["a"],QInput:w["a"],QBtn:f["a"],QCircularProgress:u["a"],QDialog:h["a"],QCard:m["a"],QCardSection:g["a"],QCardActions:b["a"]})}}]);